Bootstrap:docker  
From:debian:jessie

%labels
MAINTAINER E.GARRIGA

%environment
  CACHE_4_TCOFFEE='${TMPDIR:-/tmp}/.tcoffee/cache'
  LOCKDIR_4_TCOFFEE='${TMPDIR:-/tmp}/.tcoffee/lock'
  TMP_4_TCOFFEE='${TMPDIR:-/tmp}/.tcoffee/tmp'
  PYTHONPATH=$PYTHONPATH:/home/lib/python2.7/site-packages/

%post
  apt-get update
  apt-get install -y --no-install-recommends ed less vim-tiny wget git
  apt-get install -y --no-install-recommends python build-essential cmake curl libargtable2-0
  apt-get install -y --no-install-recommends python-biopython python-numpy ruby python-setuptools
  apt-get install -y --no-install-recommends default-jdk libpng-dev


##
# install argtable
##
  wget http://prdownloads.sourceforge.net/argtable/argtable2-13.tar.gz
  tar -zxf argtable2-13.tar.gz 
  cd argtable2-13
  ./configure
  make
  make install
  rm /argtable2-13.tar.gz
  cd /

##
# install clustal omega
##
  wget http://www.clustal.org/omega/clustal-omega-1.2.4.tar.gz
  tar -zxf clustal-omega-1.2.4.tar.gz
  cd clustal-omega-1.2.4
  ./configure
  make
  make install
  rm /clustal-omega-1.2.4.tar.gz
  cd /

##
# install mafft
##
  wget https://mafft.cbrc.jp/alignment/software/mafft-7.397-with-extensions-src.tgz
  tar xfvz mafft-7.397-with-extensions-src.tgz
  cd mafft-7.397-with-extensions/core/
  sed -i "s/PREFIX = \/usr\/local/PREFIX = \/mafft/g" Makefile 
  sed -i "s/BINDIR = \$(PREFIX)\/bin/BINDIR = \/mafft\/bin/g" Makefile
  make clean
  make
  make install
  wget http://mafft.cbrc.jp/alignment/software/newick2mafft.rb
  chmod +x newick2mafft.rb
  export "PATH=$PATH:/mafft/bin"
  export MAFFT_BINARIES=""
  cp /mafft/bin/* /bin/.
  mv /mafft-7.397-with-extensions /mafft
  rm /mafft-7.397-with-extensions-src.tgz
  cd /

      git clone https://github.com/cbcrg/tcoffee.git tcoffee380c7 
      cd tcoffee380c7 
      git checkout d2fb394d980455bfd692519f9781d094836380c7
      cd compile
      make t_coffee
      cp t_coffee /bin/t_coffee380c7 
      cd /
    ##commit 7 sept 39e160bb6c4b1e041515f9f4e42e79b687f55572
      git clone https://github.com/cbcrg/tcoffee.git tcoffeef55572
      cd tcoffeef55572
      git checkout 39e160bb6c4b1e041515f9f4e42e79b687f55572
      cd compile
      make t_coffee
      cp t_coffee /bin/t_coffeef55572
      cd /
